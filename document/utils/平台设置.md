# 栈大小查看设置

## 1. 查看

```c
#ifdef _WIN32
#include <windows.h>
#else
#include <sys/resource.h> // Linux/macOS
// int getrlimit(int resource, struct rlimit *rlptr);
// int setrlimit(int resource, const struct rlimit* rlptr);
#endif // _WIN32
void PrintStackSize() {
#ifdef _WIN32
    ULONG_PTR lowLimit, highLimit;
    GetCurrentThreadStackLimits(&lowLimit, &highLimit);
    std::size_t stackSize = highLimit - lowLimit;
    std::cout << "Stack size: " << stackSize / 1024 << " KB" << std::endl;
#else
    struct rlimit rlim;
    getrlimit(RLIMIT_STACK, &rlim);
    std::cout << "Stack size: " << rlim.rlim_cur / 1024 << " KB" << std::endl;
#endif // _WIN32
}

```

## 2. 设置

```cmake
# CMakeLists.txt
if (MSVC)
    # 设置栈大小为4MB (4194304字节)
    target_link_options(cpp11_main PRIVATE
        "/STACK:4194304"
    )
else()
    # GCC/Clang 使用 -Wl,--stack 选项
    target_link_options(cpp11_main PRIVATE
        "-Wl,--stack,4194304"
    )
endif()

#MSVC
#pragma comment(linker, "/STACK:4194304") // 4MB，Visual Studio项目属性中 命令行设置 /STACK:4194304

# 详细blog	https://blog.csdn.net/Humbunklung/article/details/125889907
```

# 控制台打印编码

```c
#ifdef _WIN32
#include <windows.h>
#endif // _WIN32
#include <iostream>
#include <locale>
int main() {
#ifdef _WIN32
    SetConsoleOutputCP(CP_UTF8);
#else
    setlocale(LC_ALL, "en_US.UTF-8");
    std::locale::global(std::locale("en_US.UTF-8")); 
    std::cout.imbue(std::locale());
#endif // _WIN32
}
```

